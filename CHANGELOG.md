# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to
[Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## 2023-09-25 - emadriga
### Added
- Connected users handled through ws(webSockets)
- Avoid unnecessary client gets through ws, when they should be subscribed at connection
- New file NOTES.md to save quick thoughts about the project from other people working on the project.

### Changed
- Fake login accepts several fake users(42 max), calling `http://localhost:3000${process.env.FAKE_LOGIN_URL}/${username}`
- Little objects modifications with more sense.

## 2023-09-23 - emadriga
### Added
- Fake login to have a secondary testing account

### Changed
- Remove default front testers, until it actually test something

## 2023-09-20 - emadriga

### Changed
- Fix file permissions on running docker (back & front) on linux
- Change generate-enviroment.sh now omits comments

## 2023-09-19 - emadriga

### Added
- Athorization to http requets on front via cookies through httpinterceptors (no front's call implemented yet)
- Authorization front<->back thorugh WS
- 1st demo chat available, to make it work you need to send message through swagger to someone in other to create chat

### Changed
- Comment some unnecessary dependencies

## 2023-09-17 - emadriga

### Added

- First implementation of '[`Socket.IO`](https://socket.io/)' to handle chats
- Login in front through back
- front now handles enviroment, run `generate-environment.sh`(included in make) to create necesary files from .env
- login guard on front redirects to intra42

### Changed
- Added some .env variables

## 2023-09-16  - tomartin

## Change
- backend/dev-compose
- change in ON_BOARDING


## 2023-09-10 - emadriga

### Added
- New branch `sandbox` to save some test or demos. Added demo of Angular chat using [`Socket.IO`](https://socket.io/), more on /Sandbox/chat-node-mysql/README.md
- New file `TO_READ.md`
> Interesting documents to read/watch with a brief explanation about it

### Changed
- Retrieved comments on Backend Multistage Dockerfile removed in previous commit

## 2023-09-09  - tomartin

## Added

- Add Makefile
- dev-compose.yml
- backend/dev-Dockerfile

## Change

- template.env

## 2023-09-04 - emadriga

### Changed

- Remove front compiled files (/frontend/srcs/.angular &
  /frontend/srcs/node_modules)
- Changes to check apis health, should be evaluated on `docker-compose.yml` not
  `Dockerfile`
- Keep autogenerated NestJS & Angular `.gitignore` on their respective proyect
  directories, while maintain a general purpose on root directory

## 2023-08-29 - pmedina

### Added

- Added some frontend components
- Added navbar & user logo with dropdown (working)

## 2023-08-30 - emadriga

### Changed

- Moved back's `docker-compose.yml` working flow to root's directory ./
- Updated `ON_BOARDING.md` set up instructions

## 2023-08-29 - emadriga

### Added

- Added chatUserMessages to db Schema
- Added chatMessages logic to `chat.controller`(GET, PUT, POST & DELETE)
  including flow to db through service, and documented on swagger
- Added `JWT` authorization to `chat.controller`, transform previous methods to
  get user from logged user.
- Added deleteOn cascade relations to db schema

### Changed

- Improve readability of schemas, objects... (id->objectId
  user1/2->talker/listener)
- Remove unnecessary dependencies
- Added some TODOs

## 2023-08-28 - emadriga

### Changed

- Lighter docker image for backend module
- Backend setup simplified (composes, env, package.json...) to work in `dev` and
  `standalone` modes, see ON_BOARDING.md
- Modified ON_BOARDING.md acordingly

## 2023-08-27 - emadriga

### Changed

- Use login to `42API` to create new users, changes on db schemas and dto
  related to handle this data.
- `JWT` token issued with our db data (username and id)

### Added

- Added some TODOs

## 2023-08-25 - emadriga

### Changed

- Improve authentication adding a `JWT` layer [https://jwt.io/](https://jwt.io/)
  getting some ideas from.

> https://github.com/nestjs/docs.nestjs.com/issues/75
> https://medium.com/@nielsmeima/auth-in-nest-js-and-angular-463525b6e071
> https://javascript.plainenglish.io/oauth2-in-nestjs-for-social-login-google-facebook-twitter-etc-8b405d570fd2
> https://www.youtube.com/watch?v=GHTA143_b-s&t=5680s

- Improve working with `.env` following
  [typescript-process-env-type](https://bobbyhadz.com/blog/typescript-process-env-type)
- Prettier formats

## 2023-08-20 - emadriga

### Added

- Moved back's `docker-compose.yml` working flow to root's directory ./

## 2023-08-20 - emadriga

### Added

- Implement oauth2 against 42API using `Passport` authentication middleware for
  Node.js, [https://www.passportjs.org/](https://www.passportjs.org/). Following
  these links

> https://www.passportjs.org/packages/passport-42/
> https://www.youtube.com/watch?v=vGafqCNCCSs
> https://github.com/ykoh42/42OAuth-NestJS/blob/master/src/login/session.serializer.ts

## 2023-08-19 - emadriga

### Added

- New file `AKNOWLEDGED_PROBLEMS.md` to share information about time comsuming
  on already known problems

### Changed

- Migrate schemas and code to use UUID as postgres PK

## 2023-08-17 - emadriga

### Added

- Added modules for `user` & `chat`
- Added `Prisma` an ORM to handle db migrations,
  [https://www.prisma.io/](https://www.prisma.io/)

> inspired by freeCodeCamp.org
> [NestJs Course for Beginners - Create a REST API](https://www.youtube.com/watch?v=GHTA143_b-s&t=1750s)

- Running Postgres DB on docker a container use `yarn db:restart`
- Added `Swagger` to document API exposing endpoint
  [https://swagger.io/](https://swagger.io/)
- Two working modes `dev` (back development) or `standalone` (testing or front
  development)
- Added `ON_BOARDING.md` to explain how to work, 1st steps, configuration
- Added `dotenv-cli` to handle several env files (more info ON_BOARDING.md)

### Changed

- Backend uses `yarn` instead of npm

### Fix

- Binaries's directories removed (backend/srcs/dist & backend/srcs/node_modules)

## 2023-08-08 - pmedina

### Changed

- Frontend Dockerfile starts angular project. npm run start runs ng serve --host
  0.0.0.0
- frontend index slightly changed

## 2023-08-06 - pmedina

### Changed

- Update backend in docker-compose to add volume.
- Ng project & nest projects created in each container /app directory (npm run
  start to run both)

## 2023-08-04 - pmedina

### Changed

- Update frontend in docker-compose to add volume.

## 2023-06-21 - emadriga

### Added

- Add CHANGELOG.md, TODO.md & .gitignore

### Changed

- Update `README.md` with how to work with branches and commits, including
  branch_struct.png with some chatgpt desc.

## 2023-06-20 - tomartin

### Added

- New repository `ft_transcendence`
- New dev branch
- Init with docker
- Add img to branch struct

## 2023-07-11 - tomartin

### Fix

- Docker-compose.yml
- Dockerfile frontend

